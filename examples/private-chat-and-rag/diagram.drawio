<mxfile host="app.diagrams.net" agent="Claude" version="24.7.6">
  <diagram id="private-chat-and-rag" name="사내 AI 챗 + RAG">
    <mxGraphModel dx="1100" dy="600" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1100" pageHeight="600" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <!-- Title -->
        <mxCell id="title" value="사내 AI 챗 + RAG: Docker로 프라이빗 ChatGPT 구동" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=20;fontStyle=1;fontFamily=Pretendard;" parent="1" vertex="1">
          <mxGeometry x="200" y="15" width="700" height="40" as="geometry" />
        </mxCell>
        <!-- Employee -->
        <mxCell id="employee" value="직원" style="shape=mxgraph.basic.smiley;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;fontFamily=Pretendard;" parent="1" vertex="1">
          <mxGeometry x="40" y="230" width="60" height="60" as="geometry" />
        </mxCell>
        <!-- Browser -->
        <mxCell id="browser" value="Browser&#xa;localhost:3000" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#999999;fontSize=10;fontFamily=Pretendard;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="140" y="235" width="110" height="50" as="geometry" />
        </mxCell>
        <!-- Docker Container boundary -->
        <mxCell id="docker_bg" value="Docker Container" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1f5fe;strokeColor=#4fc3f7;dashed=1;dashPattern=8 4;fontSize=12;fontStyle=1;fontFamily=Pretendard;verticalAlign=top;spacingTop=5;arcSize=5;" parent="1" vertex="1">
          <mxGeometry x="290" y="70" width="770" height="470" as="geometry" />
        </mxCell>
        <!-- OpenWebUI -->
        <mxCell id="openwebui" value="Open WebUI&#xa;(채팅 인터페이스)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;fontFamily=Pretendard;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="340" y="220" width="150" height="60" as="geometry" />
        </mxCell>
        <!-- Ollama -->
        <mxCell id="ollama" value="Ollama&#xa;(LLM 엔진)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#60a917;fontColor=#ffffff;strokeColor=#2D7600;fontSize=10;fontFamily=Pretendard;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="570" y="140" width="130" height="55" as="geometry" />
        </mxCell>
        <!-- Model -->
        <mxCell id="model" value="qwen3:8b" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=10;fontFamily=Pretendard;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="780" y="150" width="100" height="40" as="geometry" />
        </mxCell>
        <!-- Document Upload -->
        <mxCell id="doc_upload" value="문서 업로드&#xa;(PDF, DOCX, TXT)" style="shape=mxgraph.basic.document;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;fontFamily=Pretendard;" parent="1" vertex="1">
          <mxGeometry x="350" y="350" width="130" height="80" as="geometry" />
        </mxCell>
        <!-- Vector DB -->
        <mxCell id="vectordb" value="Vector DB&#xa;(ChromaDB)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=10;fillColor=#b0e3e6;strokeColor=#56aaaf;fontSize=10;fontFamily=Pretendard;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="570" y="330" width="120" height="80" as="geometry" />
        </mxCell>
        <!-- RAG Process -->
        <mxCell id="rag" value="RAG 처리&#xa;(검색 + 증강 생성)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;fontFamily=Pretendard;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="770" y="330" width="150" height="55" as="geometry" />
        </mxCell>
        <!-- Answer -->
        <mxCell id="answer" value="답변 생성&#xa;(문서 기반 정확한 응답)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;fontFamily=Pretendard;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="770" y="230" width="170" height="55" as="geometry" />
        </mxCell>
        <!-- Arrows -->
        <!-- Employee -> Browser -->
        <mxCell id="e1" value="질문" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#333333;fontSize=9;fontFamily=Pretendard;" parent="1" source="employee" target="browser" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- Browser -> OpenWebUI -->
        <mxCell id="e2" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#333333;fontSize=9;fontFamily=Pretendard;" parent="1" source="browser" target="openwebui" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- OpenWebUI -> Ollama -->
        <mxCell id="e3" value="일반 질의" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#333333;fontSize=9;fontFamily=Pretendard;" parent="1" source="openwebui" target="ollama" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- Ollama -> Model -->
        <mxCell id="e4" value="추론" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#333333;fontSize=9;fontFamily=Pretendard;" parent="1" source="ollama" target="model" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- Doc Upload -> VectorDB -->
        <mxCell id="e5" value="임베딩 저장" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#56aaaf;fontSize=9;fontFamily=Pretendard;" parent="1" source="doc_upload" target="vectordb" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- VectorDB -> RAG -->
        <mxCell id="e6" value="유사 문서 검색" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#56aaaf;fontSize=9;fontFamily=Pretendard;" parent="1" source="vectordb" target="rag" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- RAG -> Answer -->
        <mxCell id="e7" value="증강 생성" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#82b366;fontSize=9;fontFamily=Pretendard;" parent="1" source="rag" target="answer" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- OpenWebUI -> Doc Upload -->
        <mxCell id="e8" value="문서 RAG 질의" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#d6b656;fontSize=9;fontFamily=Pretendard;" parent="1" source="openwebui" target="doc_upload" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- Flow labels -->
        <mxCell id="flow1" value="일반 채팅 흐름" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#6c8ebf;fontFamily=Pretendard;fontStyle=3;" parent="1" vertex="1">
          <mxGeometry x="460" y="105" width="90" height="25" as="geometry" />
        </mxCell>
        <mxCell id="flow2" value="RAG 문서 검색 흐름" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#56aaaf;fontFamily=Pretendard;fontStyle=3;" parent="1" vertex="1">
          <mxGeometry x="530" y="430" width="120" height="25" as="geometry" />
        </mxCell>
        <!-- Security Note -->
        <mxCell id="security" value="데이터가 외부로 나가지 않음 | 사내 서버에서만 동작" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;fontFamily=Pretendard;rounded=1;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="330" y="555" width="320" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
